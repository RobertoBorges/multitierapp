@model IEnumerable<BookShop.Web.Models.ViewModels.BookViewModel>

@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "_AdminLayout";
}

<h1>Admin Dashboard</h1>

<div class="row mt-4">
    <div class="col-md-3">
        <div class="card text-white bg-primary mb-4">
            <div class="card-body">
                <h5 class="card-title">Books</h5>
                <p class="card-text display-4">@Model.Count()</p>
                <a asp-action="ManageBooks" class="text-white">Manage Books</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card text-white bg-success mb-4">
            <div class="card-body">
                <h5 class="card-title">Categories</h5>
                <p class="card-text display-4">@(ViewBag.Categories?.Count ?? 0)</p>
                <a href="#" class="text-white">Manage Categories</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card text-white bg-info mb-4">
            <div class="card-body">
                <h5 class="card-title">Authors</h5>
                <p class="card-text display-4">@Model.Select(b => b.AuthorId).Distinct().Count()</p>
                <a href="#" class="text-white">Manage Authors</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card text-white bg-warning mb-4">
            <div class="card-body">
                <h5 class="card-title">Orders</h5>
                <p class="card-text display-4">0</p>
                <a href="#" class="text-white">Manage Orders</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table me-1"></i>
                Recent Books
            </div>
            <div class="card-body">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var book in Model.Take(5))
                        {
                            <tr>
                                <td>@book.Title</td>
                                <td>@book.AuthorName</td>
                                <td>@book.CategoryName</td>
                                <td>@book.Price.ToString("C")</td>
                                <td>@book.StockQuantity</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-primary">Edit</a>
                                    <a href="#" class="btn btn-sm btn-danger">Delete</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="text-center mt-3">
                    <a asp-action="ManageBooks" class="btn btn-outline-primary">View All Books</a>
                </div>
            </div>
        </div>
    </div>
</div>
